# 智能数据分析系统 - 前端使用指南

## 🎯 系统概述

这是一个基于Streamlit构建的智能数据分析前端系统，提供直观的Web界面来访问强大的数据分析后端服务。支持多种分析类型，包括相关性分析、回归分析、聚类分析等。

## 🚀 快速开始

### 1. 环境要求

```bash
# Python 3.8+
pip install streamlit requests pandas numpy
```

### 2. 启动系统

#### 方法一：使用启动脚本（推荐）
```bash
cd analysis-agent/frontend
python start_system.py
```

#### 方法二：直接启动Streamlit
```bash
cd analysis-agent/frontend
streamlit run app.py --server.port=8501
```

### 3. 访问系统

打开浏览器访问：`http://localhost:8501`

## 📊 功能特性

### 🎛️ 主要功能

1. **智能分析对话**
   - 自然语言交互
   - 多轮对话支持
   - 实时分析结果展示

2. **分析类型选择**
   - 自动选择最适合的分析方法
   - 手动指定分析类型
   - 支持8种分析类型

3. **系统监控**
   - 实时系统状态显示
   - 服务器健康检查
   - 性能指标监控

4. **服务器管理**
   - 动态启用/禁用服务器
   - 服务器状态监控
   - 分析类型映射管理

### 🔧 界面组件

#### 左侧主区域
- **对话界面**: 与AI进行自然语言交互
- **快速设置**: 快速选择分析类型和数据集
- **分析详情**: 查看处理时间、分析模式等元数据

#### 右侧控制面板
- **系统状态**: 显示服务器运行状态
- **分析设置**: 配置分析类型和上下文
- **服务器管理**: 管理MCP服务器
- **使用说明**: 详细的操作指南

## 🎨 界面截图说明

### 主界面布局
```
┌─────────────────────────────────────┬─────────────────────┐
│           智能分析对话               │     控制面板         │
│  ┌─────────────────────────────┐    │  ┌───────────────┐  │
│  │        对话历史             │    │  │   系统状态    │  │
│  │  👤 用户: 分析温度和湿度     │    │  │   ✅ 健康     │  │
│  │  🤖 AI: 相关性分析结果...   │    │  └───────────────┘  │
│  └─────────────────────────────┘    │  ┌───────────────┐  │
│  ┌─────────────────────────────┐    │  │   分析设置    │  │
│  │      快速设置               │    │  │   类型: 相关性 │  │
│  │  分析类型: [相关性分析]     │    │  │   数据集: ... │  │
│  │  数据集: [可选]             │    │  └───────────────┘  │
│  └─────────────────────────────┘    │  ┌───────────────┐  │
│  ┌─────────────────────────────┐    │  │   服务器管理   │  │
│  │  输入框: 请输入分析需求...   │    │  │   correlation │  │
│  └─────────────────────────────┘    │  │   regression  │  │
└─────────────────────────────────────┴─────────────────────┘
```

## 🔧 配置说明

### config.py 配置项

```python
# API配置
API_BASE_URL = "http://localhost:8001"  # 后端API地址

# 超时设置
TIMEOUT_SETTINGS = {
    "chat_timeout": 300,      # 分析超时时间（秒）
    "status_timeout": 10,     # 状态检查超时
    "reset_timeout": 10,      # 重置超时
    "server_timeout": 15      # 服务器管理超时
}

# UI配置
UI_CONFIG = {
    "max_message_length": 10000,      # 最大消息长度
    "max_conversation_history": 50,   # 最大对话历史
    "show_metadata": True,            # 显示分析元数据
    "enable_quick_settings": True     # 启用快速设置
}
```

## 📖 使用指南

### 1. 基础分析流程

1. **输入分析需求**
   ```
   示例: "请分析销售数据中价格和销量的关系"
   ```

2. **选择分析类型**
   - 自动选择（推荐）
   - 手动选择特定类型

3. **提供数据集路径**（可选）
   ```
   示例: /data/sales_data.csv
   ```

4. **查看分析结果**
   - Markdown格式的详细报告
   - 分析元数据和性能指标

### 2. 高级功能使用

#### 多轮对话分析
```
第一轮: "我有一个客户数据集"
第二轮: "请对客户进行聚类分析"
第三轮: "分成5个群组，使用K-means算法"
```

#### 上下文设置
```json
{
    "dataset": "/data/customer_data.csv",
    "priority": "high",
    "cluster_count": 5,
    "algorithm": "kmeans"
}
```

#### 服务器管理
- 查看服务器状态
- 启用/禁用特定分析服务器
- 监控服务器健康状态

### 3. 分析类型说明

| 分析类型 | 说明 | 适用场景 |
|---------|------|----------|
| 相关性分析 | 变量间关系分析 | 探索变量关联性 |
| 回归分析 | 预测模型构建 | 预测连续变量 |
| 聚类分析 | 数据群组发现 | 客户细分、市场分析 |
| 分类分析 | 分类模型构建 | 预测分类结果 |
| 时间序列 | 时间数据分析 | 趋势预测、季节性分析 |
| 描述性统计 | 基础统计信息 | 数据概览、质量检查 |
| 统计检验 | 假设检验 | 显著性检验、A/B测试 |
| 自定义分析 | 定制化分析 | 特殊需求分析 |

## 🛠️ 故障排除

### 常见问题

1. **前端无法启动**
   ```bash
   # 检查依赖
   pip install streamlit requests
   
   # 检查端口占用
   netstat -tlnp | grep :8501
   ```

2. **无法连接后端**
   ```bash
   # 检查后端状态
   curl http://localhost:8001/status
   
   # 检查配置
   # 确认 config.py 中的 API_BASE_URL 正确
   ```

3. **分析请求超时**
   ```python
   # 增加超时时间
   TIMEOUT_SETTINGS = {
       "chat_timeout": 600  # 增加到10分钟
   }
   ```

4. **页面显示异常**
   ```bash
   # 清除浏览器缓存
   # 或使用无痕模式访问
   ```

### 调试模式

```bash
# 启用Streamlit调试模式
streamlit run app.py --logger.level=debug
```

## 🔒 安全注意事项

1. **网络安全**
   - 生产环境建议使用HTTPS
   - 配置防火墙限制访问

2. **数据安全**
   - 敏感数据路径验证
   - 文件访问权限控制

3. **输入验证**
   - 限制消息长度
   - 过滤恶意输入

## 📈 性能优化

1. **前端优化**
   ```python
   # 启用缓存
   @st.cache_data
   def get_analysis_types():
       return fetch_analysis_types()
   ```

2. **网络优化**
   - 合理设置超时时间
   - 使用连接池

3. **用户体验**
   - 显示加载状态
   - 提供进度反馈

## 🔄 更新日志

### v2.0.0 (当前版本)
- ✨ 全新的通用数据分析界面
- 🎯 支持8种分析类型
- 🔧 系统状态监控
- 🖥️ 服务器管理功能
- 📊 分析元数据显示
- ⚙️ 灵活的配置系统

### v1.0.0
- 🤖 基础对话界面
- 📈 相关性分析支持

## 📞 技术支持

如果您在使用过程中遇到问题，请：

1. 查看本文档的故障排除部分
2. 检查系统日志文件
3. 确认后端服务正常运行
4. 验证网络连接状态

---

**智能数据分析系统前端** - 让数据分析变得简单直观！ 🚀 